<% layout('/layout/boilerplate') %>

<div class="row mt-3">
<div class="col-8 offset-3 ">

    <h4><%=data.title%></h4>
</div>
    <div class="card listing-card col-6 offset-3">
        <img src="<%=data.image%>" class="card-img-top show-img " alt="listing_image">
        <div class="card-body">
          <p class="card-text">
            <%=data.description%> <br>
            &#8377;: <%=data.price.toLocaleString("en-IN")%>/night <br> 
            <%=data.location%> <br>
            <%=data.country%> <br>
          </p>
        </div>
      </div>
      
 </div>
 <div class="show-btns col-2 mb-3 offset-3">
  <a href="http://localhost:3000/listing/<%=data._id%>/edit" class="editbtn btn btn-dark">Edit</a> <br>

  <form action="/listing/<%=data._id%>?_method=DELETE" method="POST"><button class="btn btn-dark">Delete</button></form>

</div>
<hr>
<div class="col-8 offset-3 mb-3">
  <h4>Rate us.</h4>
  <form action="/listing/<%=data._id%>/review" method="POST" class="needs-validation" novalidate>
    <div class="mb-3">
      <label for="rate" class="form-label"></label>
      <input type="range" name="review[rating]" id="rate" class="form-control form-range" min="1" max="5"  required>
    </div>
    <div class="mb-3">
      <label for="comment" class="form-label">Write your review</label>
      <textarea name="review[comment]" id="comment" rows="4" class="form-control" cols="50"  required></textarea>
      <div class="invalid-feedback">you have to write reviews</div>
    </div>
    <button class="btn btn-dark">submit</button>

  </form>
<hr>
  <h4>All Reviews</h4>
  <div class="row">
  
  <% data.rating.forEach((review)=>{ %>
    <div class="card col-5 mb-2 ms-2">
      <h5>john doe</h5>
      <h5 class="card-title"><%=review.comment%></h5>
      <h6 class="card-text"><%=review.rating%> stars</h6>
      <form class="mb-2" action="/listing/<%=data._id%>/review/<%=review._id%>?_method=DELETE" method="POST">
        <button class="btn btn-sm btn-dark mb-3">Delete</button>
  
      </form>
    </div>
    
 <% }) %>

</div>
</div>
